# Notionデータベース設計書

## 概要

このドキュメントでは、notion-zenn-editorを実運用するために必要な、Notionデータベースの設計とプロパティ構造を定義します。

---

## データベース構造

### 必須プロパティ

| プロパティ名 | 型 | 説明 | 用途 | 例 |
|-------------|------|------|------|-----|
| **Name** (タイトル) | Title | ページのタイトル | Zenn記事のタイトルとして使用 | 「AWS VPCの基礎を学んだ」 |
| **Status** | Select | 記事の状態管理 | ワークフロー管理 | 下書き / レビュー中 / 公開済み |
| **Type** | Select | 記事の種類 | Zennのtypeフィールド | tech / idea |
| **Topics** | Multi-select | 記事のトピックタグ | Zennのtopicsフィールド（最大5個） | AWS, VPC, ネットワーク |
| **Emoji** | Text | 記事の絵文字 | Zennのemojiフィールド | 📝 🚀 💡 |
| **Created** | Created time | ページ作成日時 | 学習日として使用 | 自動設定 |
| **Last Edited** | Last edited time | 最終編集日時 | 更新追跡 | 自動設定 |

### 推奨プロパティ

| プロパティ名 | 型 | 説明 | 用途 | 例 |
|-------------|------|------|------|-----|
| **Published Date** | Date | 公開日 | いつ公開したかの記録 | 2025-01-15 |
| **Zenn URL** | URL | 公開済み記事のURL | 逆参照・確認用 | https://zenn.dev/username/articles/xxx |
| **Published** | Checkbox | 公開フラグ | Zennのpublishedフィールド | ☑ / ☐ |
| **Category** | Select | 大カテゴリ | 記事の分類 | フロントエンド / バックエンド / インフラ |
| **Learning Time** | Number | 学習時間（分） | 時間追跡 | 120 |
| **Difficulty** | Select | 難易度 | 自己評価 | 初級 / 中級 / 上級 |

### オプションプロパティ

| プロパティ名 | 型 | 説明 | 用途 | 例 |
|-------------|------|------|------|-----|
| **Week** | Formula | 週番号の自動計算 | 週次レポート生成時のフィルタ | 2025-W03 |
| **Article ID** | Text | Zennの記事スラッグ | ファイル名として使用 | aws-vpc-basics |
| **Related Pages** | Relation | 関連するページ | シリーズ記事管理 | - |
| **Reference URLs** | URL | 参考リンク | 学習時に参照したURL | - |
| **Next Actions** | Text | 次のアクション | TODO管理 | 「実際にVPCを構築する」 |

---

## プロパティの詳細設定

### 1. Status（必須）

**Select型のオプション：**

- **🟡 下書き** (Draft)
  - 初期状態
  - まだ記事として未完成
  - Notionで自由に編集中

- **🔵 レビュー中** (Review)
  - 内容が完成し、確認待ち
  - 記事生成前の最終チェック

- **🟢 生成済み** (Generated)
  - Zenn記事が生成された
  - まだZennには公開していない

- **🟣 公開済み** (Published)
  - Zennに公開完了
  - Zenn URLが設定されている

- **🔴 アーカイブ** (Archived)
  - 古い記事や非公開にした記事
  - レポート生成時に除外

**運用ルール：**
- 新規作成時は「下書き」
- 内容が完成したら「レビュー中」に変更
- レビュー完了後、ツールで記事を生成（自動で「生成済み」に変更）
- Zennに公開したら「公開済み」に変更

---

### 2. Type（必須）

**Select型のオプション：**

- **tech** (技術記事)
  - デフォルト
  - 技術的な内容、チュートリアル、学習記録など

- **idea** (アイデア記事)
  - ポエム、思考、意見など

**運用ルール：**
- 基本的には「tech」を選択
- 技術以外の内容（キャリア論、学習法など）は「idea」

---

### 3. Topics（必須）

**Multi-select型のオプション例：**

#### フロントエンド
- React
- Next.js
- TypeScript
- Vue.js
- CSS
- Tailwind CSS

#### バックエンド
- Node.js
- Python
- Go
- Rust
- API設計

#### インフラ・クラウド
- AWS
- Docker
- Kubernetes
- Terraform
- CI/CD

#### データベース
- PostgreSQL
- MySQL
- MongoDB
- Redis

#### その他
- Git
- GitHub
- 学習記録
- 週次レポート

**運用ルール：**
- 最大5個まで選択可能（Zennの制限）
- 主要なトピックを3個程度選ぶのが理想
- 「学習記録」タグは個人用として使用可能

---

### 4. Emoji（必須）

**Text型：絵文字を1文字入力**

**カテゴリ別推奨絵文字：**
- 学習記録: 📝 📚 ✏️ 📖
- フロントエンド: 🎨 🖼️ ⚛️ 🌐
- バックエンド: 🔧 ⚙️ 🔨 🛠️
- インフラ: ☁️ 🐳 🚀 🏗️
- データベース: 🗄️ 💾 📊
- セキュリティ: 🔒 🛡️ 🔐
- パフォーマンス: ⚡ 🏎️ 💨
- エラー・トラブル: 🐛 🔥 ⚠️
- 達成・成功: ✅ 🎉 🎯 💯

**運用ルール：**
- 記事作成時に設定
- 記事の内容をイメージしやすい絵文字を選ぶ
- デフォルトは「📝」

---

### 5. Week（Formula、オプション）

**週番号を自動計算するFormula：**

```
formatDate(prop("Created"), "YYYY") + "-W" + format(floor((dateBetween(prop("Created"), parseDate(formatDate(prop("Created"), "YYYY") + "-01-01"), "days") + parseDate(formatDate(prop("Created"), "YYYY") + "-01-01").day() + 6) / 7))
```

**簡易版（ISO週番号）：**
```
formatDate(prop("Created"), "YYYY-[W]WW")
```

**用途：**
- 週次レポート生成時のフィルタ
- 週ごとの学習量の可視化

---

## データベースビューの設定

### 1. 全記事ビュー（デフォルト）

**表示プロパティ：**
- Name（タイトル）
- Status
- Type
- Topics
- Created
- Published Date

**グループ化：**
- Status でグループ化

**並び替え：**
- Created（降順）

---

### 2. 今週の学習ビュー

**フィルタ：**
- Created: Is within → This week
- Status: Is not → アーカイブ

**表示プロパティ：**
- Name
- Status
- Topics
- Learning Time
- Created

**並び替え：**
- Created（降順）

---

### 3. 公開準備中ビュー

**フィルタ：**
- Status: Is → レビュー中 OR 生成済み

**表示プロパティ：**
- Name
- Status
- Type
- Topics
- Emoji
- Published

**並び替え：**
- Last Edited（降順）

---

### 4. 公開済みビュー

**フィルタ：**
- Status: Is → 公開済み

**表示プロパティ：**
- Name
- Published Date
- Zenn URL
- Topics
- Type

**並び替え：**
- Published Date（降順）

---

## ページテンプレート設計

### 基本テンプレート

Notionデータベース内で「New」ボタンを押した際に使用するテンプレート：

#### テンプレート1: 学習記録

**プロパティデフォルト値：**
- Status: 下書き
- Type: tech
- Emoji: 📝
- Published: ☐

**ページ本文テンプレート：**

```markdown
## 概要
[今日学んだことの概要を1-2行で]

## 学んだこと
-
-
-

## 詳細

### [トピック1]


### [トピック2]


## つまづいた点
[困ったこと、エラー、理解に時間がかかった点]

## 解決方法
[どうやって解決したか、何が理解のブレイクスルーになったか]

## コード例

\`\`\`typescript
// ここにコードを記載
\`\`\`

## 参考資料
- [公式ドキュメント]()
- [参考記事]()

## 次のアクション
- [ ]
```

---

#### テンプレート2: チュートリアル・ハンズオン

**プロパティデフォルト値：**
- Status: 下書き
- Type: tech
- Emoji: 🚀
- Published: ☐

**ページ本文テンプレート：**

```markdown
## はじめに
[何を作るか、なぜ作るか]

## 前提条件
- Node.js v20以上
-

## 環境構築

\`\`\`bash
# コマンド
\`\`\`

## 実装手順

### Step 1: [ステップ名]

[説明]

\`\`\`typescript
// コード
\`\`\`

### Step 2: [ステップ名]

[説明]

\`\`\`typescript
// コード
\`\`\`

## 動作確認

\`\`\`bash
# テストコマンド
\`\`\`

## まとめ
[作ったもの、学んだこと]

## 参考資料
-
```

---

## 運用フロー

### 日次フロー（毎日）

1. **学習開始時**
   - Notionデータベースで「New」をクリック
   - テンプレートを選択（学習記録 or チュートリアル）
   - タイトルを入力（例: 「AWS VPCの基礎」）
   - Topics, Emoji を設定

2. **学習中**
   - テンプレートに沿って内容を記録
   - コードスニペット、エラー、解決方法をメモ
   - 参考URLを保存

3. **学習終了時**
   - Learning Time（学習時間）を記録
   - Status を「下書き」のまま保存

---

### 週2回フロー（記事生成・公開）

1. **記事レビュー**
   - 「今週の学習ビュー」で今週作成したページを確認
   - 公開したいページを選択
   - 内容を読み直し、推敲
   - Status を「レビュー中」に変更

2. **記事生成**
   - このツール（notion-zenn-editor）を起動
   - 「レビュー中」のページ一覧から選択
   - 「Zenn記事を生成」をクリック
   - プレビューで内容を確認
   - Markdown をダウンロード
   - Status が自動で「生成済み」に変更

3. **Zennに公開**
   - Zenn CLI で記事を公開
   - 公開URLをコピー
   - Notionに戻り、Zenn URL フィールドに貼り付け
   - Published Date を今日の日付に設定
   - Published を ☑ にチェック
   - Status を「公開済み」に変更

---

### 月次フロー（月1回、振り返り）

1. **今月の統計確認**
   - 公開した記事数
   - 学習時間の合計
   - よく学んだトピック

2. **データベースの整理**
   - 古い「下書き」を確認
   - 不要なページを「アーカイブ」に
   - Topics の整理（使われていないタグの削除）

3. **来月の目標設定**
   - 学習したいトピックをリストアップ
   - 公開目標記事数を設定

---

## ベストプラクティス

### 1. タイトルの付け方

**Good:**
- 「Next.js App RouterでServer Actionsを使う」
- 「AWS Lambdaのコールドスタート問題と対策」
- 「TypeScriptの型パズルを解いた」

**Bad:**
- 「今日の学習」（具体性がない）
- 「メモ」（検索しづらい）
- 「test」（意味不明）

### 2. Topics の選び方

- **メインテーマ1個 + 関連技術2-3個**
  - 例: ["Next.js", "TypeScript", "Server Actions"]

- **幅広すぎるタグは避ける**
  - ❌ "プログラミング", "Web開発"
  - ✅ "React", "フロントエンド"

### 3. コンテンツの書き方

- **結論を先に書く**
  - 「概要」セクションで何を学んだか明記

- **コードは動作するものを載せる**
  - コピペで動くコードスニペット

- **つまづきポイントを必ず書く**
  - 自分がハマった点は他の人もハマる
  - それが一番価値のある情報

### 4. Status 管理

- **下書きで溜め込まない**
  - 週に1-2本は「レビュー中」に進める

- **レビュー中は3日以内に公開**
  - 鮮度が重要

- **公開済みは Zenn URL を必ず設定**
  - あとで見返せる

---

## よくある質問

### Q1: Topics は何個つければいいですか？

**A:** 3-4個が理想です。Zennの制限は5個までですが、多すぎると記事の焦点がぼやけます。

### Q2: 短い学習内容でも記事にすべきですか？

**A:** はい。短くても「つまづいた点と解決方法」があれば価値があります。複数の短い学習を週次レポートにまとめることもできます。

### Q3: プライベートな学習記録も Notion に書いていいですか？

**A:** はい。Status を「下書き」のままにしておけば、Zenn には公開されません。学習記録として Notion に残し、公開したいものだけ「レビュー中」に進めましょう。

### Q4: 画像やスクリーンショットはどう管理すればいいですか？

**A:** 現在のツールは画像未対応ですが、今後対応予定です。それまでは：
1. Notion に画像を貼る（記録用）
2. 記事生成後、手動で画像を追加

---

## まとめ

この設計に従って Notion データベースを構築することで：

✅ **日々の学習が自動的に記事の素材になる**
✅ **記事の状態管理が明確になる**
✅ **Zennへの公開フローがスムーズになる**
✅ **過去の学習を振り返りやすくなる**
✅ **週次・月次での振り返りが簡単になる**

---

**次のステップ：**
1. この設計書を参考に、Notionでデータベースを作成
2. プロパティを設定
3. ビューを作成
4. テンプレートを作成
5. 実際に1週間運用してみる

何か不明点があれば、気軽に質問してください！
